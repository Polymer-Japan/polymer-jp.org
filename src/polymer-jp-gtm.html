<link rel="import" href="../bower_components/polymer/polymer-element.html">

<script>
  class PolymerJpGtm extends Polymer.Element {
    static get is() { return 'polymer-jp-gtm'; }
    static get properties() {
      return {
        cid: {
          type: String,
          observer: '_idChanged',
        }
      }
    }
    static get template() {
      return `<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=[[cid]]"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>`;
    }
    _idChanged(id){
      if(id){
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer',id);
      }
    }
	}
  customElements.define(PolymerJpGtm.is, PolymerJpGtm);
</script>
